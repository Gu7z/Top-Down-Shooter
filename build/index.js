var B=Object.defineProperty;var N=(a,i,t)=>i in a?B(a,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[i]=t;var U=(a,i)=>{for(var t in i)B(a,t,{get:i[t],enumerable:!0})};var y=(a,i,t)=>(N(a,typeof i!="symbol"?i+"":i,t),t);var g=class{constructor({app:i,menu:t}){this.app=i,this.controlsContainer=new PIXI.Container;let n=this.app.screen.width/2,s=this.app.screen.height/3,r=new PIXI.Sprite(PIXI.Texture.WHITE);r.tint=16777215,r.anchor.set(.5),r.position.set(n,s),r.width=380,r.height=400;let h=new PIXI.Sprite(PIXI.Texture.WHITE);h.tint=16777215,h.anchor.set(.5),h.position.set(n,this.app.screen.height-50),h.width=160,h.height=40,h.interactive=!0,h.cursor="pointer",h.on("click",()=>{this.app.stage.removeChild(this.controlsContainer),t.show()}),this.controlsContainer.addChild(r),this.controlsContainer.addChild(h),this.addText("Voltar",n,this.app.screen.height-50);let e=["Mouse1/Espaço - Pressione para Atirar","W - Mover para cima","S - Mover para baixo","D - Mover para direita","A - Mover para esquerda","M - Mutar/Desmutar","Esc - Pausar"],o={x:n,y:s-150};e.forEach(p=>{this.addText(p,o.x,o.y),o.y+=50}),this.app.stage.addChild(this.controlsContainer)}addText(i,t,n){let s=new PIXI.Text(i,{fill:0,fontSize:30});s.position.set(t,n),s.anchor.set(.5),this.controlsContainer.addChild(s)}},A=g;function F(a,i){var t=Math.random()*(i-a)+a;return Math.floor(t)}var C=F;var I=class{constructor({app:i,hud:t}){this.app=i,this.hud=t,this.width=40,this.height=40,this.buffDuration=4,this.buffContainer=new PIXI.Container,this.createBuff({app:this.app})}createBuff({app:i}){let t=C(this.width,this.app.screen.width-this.width),n=C(this.height,this.app.screen.height-this.height);PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST;let s=PIXI.Texture.from("./images/speed_buff.png");this.buff=new PIXI.Sprite(s),this.buff.position.set(t,n),this.buff.width=this.width,this.buff.height=this.height;let r=this.app.setInterval(()=>{this.buff.destroyed||this.destroy(),r.clear()},7),h=this.app.setInterval(()=>{this.hud.dead||this.createBuff({app:this.app}),h.clear()},20);this.buffContainer.addChild(this.buff),i.stage.addChild(this.buffContainer)}get(i){i.shooting.setFireVelocity=2,this.app.setTimeout(()=>{i.shooting.setFireVelocity=1},this.buffDuration)}update(i){if(this.buff.destroyed)return;let t=i.player.getBounds(),n=this.buff.getBounds();t.x+t.width>n.x&&t.x<n.x+n.width&&t.y+t.height>n.y&&t.y<n.y+n.height&&this.buff.visible&&(this.destroy(),this.get(i))}destroy(){this.buff.destroy()}},z=I;function $(a,i,t){return t={path:i,exports:{},require:function(n,s){return K(n,s==null?t.path:s)}},a(t,t.exports),t.exports}function K(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var G=$(function(a,i){a.exports=t;function t(e,o){if(!(this instanceof t))return new t(e,o);this.x=e||0,this.y=o||0}t.fromArray=function(e){return new t(e[0]||0,e[1]||0)},t.fromObject=function(e){return new t(e.x||0,e.y||0)},t.prototype.addX=function(e){return this.x+=e.x,this},t.prototype.addY=function(e){return this.y+=e.y,this},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.addScalar=function(e){return this.x+=e,this.y+=e,this},t.prototype.addScalarX=function(e){return this.x+=e,this},t.prototype.addScalarY=function(e){return this.y+=e,this},t.prototype.subtractX=function(e){return this.x-=e.x,this},t.prototype.subtractY=function(e){return this.y-=e.y,this},t.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.subtractScalar=function(e){return this.x-=e,this.y-=e,this},t.prototype.subtractScalarX=function(e){return this.x-=e,this},t.prototype.subtractScalarY=function(e){return this.y-=e,this},t.prototype.divideX=function(e){return this.x/=e.x,this},t.prototype.divideY=function(e){return this.y/=e.y,this},t.prototype.divide=function(e){return this.x/=e.x,this.y/=e.y,this},t.prototype.divideScalar=function(e){return e!==0?(this.x/=e,this.y/=e):(this.x=0,this.y=0),this},t.prototype.divideScalarX=function(e){return e!==0?this.x/=e:this.x=0,this},t.prototype.divideScalarY=function(e){return e!==0?this.y/=e:this.y=0,this},t.prototype.invertX=function(){return this.x*=-1,this},t.prototype.invertY=function(){return this.y*=-1,this},t.prototype.invert=function(){return this.invertX(),this.invertY(),this},t.prototype.multiplyX=function(e){return this.x*=e.x,this},t.prototype.multiplyY=function(e){return this.y*=e.y,this},t.prototype.multiply=function(e){return this.x*=e.x,this.y*=e.y,this},t.prototype.multiplyScalar=function(e){return this.x*=e,this.y*=e,this},t.prototype.multiplyScalarX=function(e){return this.x*=e,this},t.prototype.multiplyScalarY=function(e){return this.y*=e,this},t.prototype.normalize=function(){var e=this.length();return e===0?(this.x=1,this.y=0):this.divide(t(e,e)),this},t.prototype.norm=t.prototype.normalize,t.prototype.limit=function(e,o){return Math.abs(this.x)>e&&(this.x*=o),Math.abs(this.y)>e&&(this.y*=o),this},t.prototype.randomize=function(e,o){return this.randomizeX(e,o),this.randomizeY(e,o),this},t.prototype.randomizeX=function(e,o){var p=Math.min(e.x,o.x),d=Math.max(e.x,o.x);return this.x=s(p,d),this},t.prototype.randomizeY=function(e,o){var p=Math.min(e.y,o.y),d=Math.max(e.y,o.y);return this.y=s(p,d),this},t.prototype.randomizeAny=function(e,o){return Math.round(Math.random())?this.randomizeX(e,o):this.randomizeY(e,o),this},t.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.toFixed=function(e){return typeof e=="undefined"&&(e=8),this.x=this.x.toFixed(e),this.y=this.y.toFixed(e),this},t.prototype.mixX=function(e,o){return typeof o=="undefined"&&(o=.5),this.x=(1-o)*this.x+o*e.x,this},t.prototype.mixY=function(e,o){return typeof o=="undefined"&&(o=.5),this.y=(1-o)*this.y+o*e.y,this},t.prototype.mix=function(e,o){return this.mixX(e,o),this.mixY(e,o),this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyX=function(e){return this.x=e.x,this},t.prototype.copyY=function(e){return this.y=e.y,this},t.prototype.copy=function(e){return this.copyX(e),this.copyY(e),this},t.prototype.zero=function(){return this.x=this.y=0,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.cross=function(e){return this.x*e.y-this.y*e.x},t.prototype.projectOnto=function(e){var o=(this.x*e.x+this.y*e.y)/(e.x*e.x+e.y*e.y);return this.x=o*e.x,this.y=o*e.y,this},t.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},t.prototype.horizontalAngleDeg=function(){return r(this.horizontalAngle())},t.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},t.prototype.verticalAngleDeg=function(){return r(this.verticalAngle())},t.prototype.angle=t.prototype.horizontalAngle,t.prototype.angleDeg=t.prototype.horizontalAngleDeg,t.prototype.direction=t.prototype.horizontalAngle,t.prototype.rotate=function(e){var o=this.x*Math.cos(e)-this.y*Math.sin(e),p=this.x*Math.sin(e)+this.y*Math.cos(e);return this.x=o,this.y=p,this},t.prototype.rotateDeg=function(e){return e=h(e),this.rotate(e)},t.prototype.rotateTo=function(e){return this.rotate(e-this.angle())},t.prototype.rotateToDeg=function(e){return e=h(e),this.rotateTo(e)},t.prototype.rotateBy=function(e){var o=this.angle()+e;return this.rotate(o)},t.prototype.rotateByDeg=function(e){return e=h(e),this.rotateBy(e)},t.prototype.distanceX=function(e){return this.x-e.x},t.prototype.absDistanceX=function(e){return Math.abs(this.distanceX(e))},t.prototype.distanceY=function(e){return this.y-e.y},t.prototype.absDistanceY=function(e){return Math.abs(this.distanceY(e))},t.prototype.distance=function(e){return Math.sqrt(this.distanceSq(e))},t.prototype.distanceSq=function(e){var o=this.distanceX(e),p=this.distanceY(e);return o*o+p*p},t.prototype.length=function(){return Math.sqrt(this.lengthSq())},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},t.prototype.magnitude=t.prototype.length,t.prototype.isZero=function(){return this.x===0&&this.y===0},t.prototype.isEqualTo=function(e){return this.x===e.x&&this.y===e.y},t.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},t.prototype.toArray=function(){return[this.x,this.y]},t.prototype.toObject=function(){return{x:this.x,y:this.y}};var n=180/Math.PI;function s(e,o){return Math.floor(Math.random()*(o-e+1)+e)}function r(e){return e*n}function h(e){return e/n}}),f=G;var J=(a,i,t,n)=>{i.forEach((s,r)=>{if(a.destroyed)return;let h=s.enemy.position.x-a.position.x,e=s.enemy.position.y-a.position.y;if(Math.sqrt(h*h+e*e)<t+s.enemyRadius){s.kill(i,r,n),a.visible=!1,a.destroy(),n.points%10==0&&PIXI.sound.Sound.from("sound/reward.mp3").play();return}})},_=J;var v=class{constructor({app:i,player:t,playerSize:n,keys:s}){this.app=i,this.player=t,this.playerSize=n,this.bulletSpeed=4,this.bullets=[],this.bulletRadius=5,this.fireVelocity=1,this.keys=s,this.shooting=!1,this.shootInterval=.3,this.shootingContainer=new PIXI.Container,this.sound=PIXI.sound.Sound.from("sound/shot.mp3"),this.interval=void 0,this.shooting=!1,this.shoot()}shoot(){this.interval=this.app.setInterval(()=>{(this.keys[" "]||this.shooting)&&this.fire(),this.interval.clear(),this.shoot()},this.shootInterval/this.fireVelocity)}fire(){this.sound.play();let i=this.player.rotation;this.bullets=this.bullets.filter(s=>{if(!s.destroyed)return Math.abs(s.position.x)<this.app.screen.width+this.bulletRadius&&Math.abs(s.position.y)<this.app.screen.height+this.bulletRadius});let t=new PIXI.Graphics;t.beginFill(65280,1),t.drawCircle(0,0,this.bulletRadius),t.endFill();let n=new f(Math.cos(i),Math.sin(i)).multiplyScalar(this.playerSize);t.position.set(this.player.position.x+n.x,this.player.position.y+n.y),t.velocity=new f(Math.cos(i),Math.sin(i)).multiplyScalar(this.bulletSpeed),this.bullets.push(t),this.shootingContainer.addChild(t),this.app.stage.addChild(this.shootingContainer)}set setFireVelocity(i){this.fireVelocity=i}update(i,t,n){!t||!n||(this.shooting=i,this.bullets.forEach(s=>{s.destroyed||!s||(s.position.set(s.position.x+s.velocity.x,s.position.y+s.velocity.y),_(s,t.spawns,this.bulletRadius,n))}))}},L=v;var P=class{constructor({app:i,username:t,keys:n}){y(this,"setMousePosition",(i,t)=>{this.mouseX=i,this.mouseY=t});y(this,"movePlayer",i=>{if(i.w){if(this.outOfBounds("w"))return;this.player.y-=this.velocity}if(i.a){if(this.outOfBounds("a"))return;this.player.x-=this.velocity}if(i.s){if(this.outOfBounds("s"))return;this.player.y+=this.velocity}if(i.d){if(this.outOfBounds("d"))return;this.player.x+=this.velocity}});y(this,"lookTo",()=>{let i=Math.atan2(this.mouseY-this.player.position.y,this.mouseX-this.player.position.x);this.player.rotation=i});this.app=i,this.points=0,this.lifes=1,this.velocity=2,this.size=20,this.username=t,this.playerContainer=new PIXI.Container;let s=i.screen.width/2,r=i.screen.height/2,h=PIXI.Texture.from("./images/spaceship.png");h.rotate=6,this.player=new PIXI.Sprite(h),this.player.scale.x*=this.size/100,this.player.scale.y*=this.size/100,this.player.anchor.set(.5),this.player.position.set(s,r),this.shooting=new L({app:i,player:this.player,playerSize:this.size,keys:n}),this.setMousePosition(s,0),this.playerContainer.addChild(this.player),this.app.stage.addChild(this.playerContainer)}outOfBounds(i){let t=this.player.y+this.player.height,n=this.player.x+this.player.width,{width:s,height:r}=this.app.screen,h={leftAndTop:this.size*4.5,right:s+this.size*2.5,bottom:r+this.size*2.5};switch(i){case"w":return t<h.leftAndTop;case"a":return n<h.leftAndTop;case"s":return t>h.bottom;case"d":return n>h.right;default:return!0}}update(i){this.lookTo(),this.movePlayer(i)}},j=P;var b=class{constructor({app:i,enemyRadius:t,speed:n,color:s,life:r,value:h,container:e}){this.app=i,this.speed=n,this.life=r,this.value=h,this.enemyRadius=t;let o=[16777215,16761035].includes(s)?0:16777215;this.enemy=new PIXI.Graphics,this.enemy.beginFill(s,1),this.enemy.drawCircle(0,0,t),this.enemy.endFill(),this.enemyLifeText=new PIXI.Text(this.life,{fill:o}),this.enemyLifeText.position.set(0,0),this.enemyLifeText.anchor.set(.5),this.resetPosition(),e.addChild(this.enemy),e.addChild(this.enemyLifeText),i.stage.addChild(e)}resetPosition(){let i=this.randomPosition();this.enemy.position.set(i.x,i.y),this.enemyLifeText.position.set(i.x,i.y)}randomPosition(){let{width:i,height:t}=this.app.screen,n=Math.floor(Math.random()*4),s=new f(0,0);switch(n){case 0:s.x=i*Math.random();break;case 1:s.x=i,s.y=t*Math.random();break;case 2:s.x=i*Math.random(),s.y=t;break;case 3:s.y=t*Math.random();break;default:break}return s}removePlayerLife(i,t){i.lifes-=1,t.reset()}goToPlayer(i,t){let n=i.player,s=new f(this.enemy.position.x,this.enemy.position.y),r=new f(n.position.x,n.position.y);if(s.distance(r)<n.width/2){this.removePlayerLife(i,t);return}let o=r.subtract(s).normalize().multiplyScalar(this.speed),p=this.enemy.position.x+o.x,d=this.enemy.position.y+o.y;this.enemy.position.set(p,d),this.enemyLifeText.position.set(p,d),this.enemyLifeText.text=this.life}kill(i,t,n){this.life>1?this.life-=1:i&&(n.points+=this.value,this.enemy.visible=!1,this.enemyLifeText.visible=!1,i.splice(t,1))}update(i,t){this.enemy.destroyed||this.goToPlayer(i,t)}},Y=b;var T=class{constructor({app:i,player:t}){y(this,"enemyClass",(i,t,n,s,r=1,h=1)=>({speed:i,color:t,enemyRadius:n,life:s,value:r,ammoutToSpawn:h}));this.app=i,this.player=t,this.spawns=[],this.spawnLimit=1,this.bossRadius=25,this.alreadySpawnedBosses=new Set,this.spawnerContainer=new PIXI.Container,this.app.setInterval(()=>{this.spawnLimit+=1},5)}calculateSpeed(i,t){return t<1?i:Math.min(i*t,1.75)}enemyType(){let i=50,t=this.player.points%i==0,n=this.player.points>0,s=Math.floor(this.player.points/i),r=this.alreadySpawnedBosses.has(this.player.points);if(t&&n&&!r)return this.alreadySpawnedBosses.add(this.player.points),this.enemyClass(1,16761035,this.bossRadius,10*s,10,s);let h=Math.floor(Math.random()*13)+1,e;switch(h){case 1:case 2:case 3:return e=this.calculateSpeed(.5,s),this.enemyClass(e,197372,18,4);case 4:case 5:case 6:return e=this.calculateSpeed(1,s),this.enemyClass(e,6488222,17,3);case 7:case 8:case 9:return e=this.calculateSpeed(1.5,s),this.enemyClass(e,10551645,16,2);case 10:case 11:case 12:return this.enemyClass(2,16646146,15,1);case 13:return this.enemyClass(2.5,16777215,14,1);default:break}}reset(){this.spawns.forEach(i=>i.kill()),this.spawns=[]}update(i){if(this.spawns.length>=this.spawnLimit||i.lifes<1)return;let{app:t}=this,n=this.enemyType();for(let s=0;s<n.ammoutToSpawn;s++){let r=new Y({app:t,...n,container:this.spawnerContainer});this.spawns.push(r)}}},O=T;var m={};U(m,{MODE:()=>tt,NODE_ENV:()=>et,SNOWPACK_PUBLIC_API_URL_DEV:()=>Q,SNOWPACK_PUBLIC_API_URL_PROD:()=>Z,SSR:()=>it});var Z="https://top-down-shooter-backend.vercel.app/",Q="http://localhost:3000",tt="production",et="production",it=!1;var st={};st.env=m;var nt=()=>{let{SNOWPACK_PUBLIC_API_URL_PROD:a,SNOWPACK_PUBLIC_API_URL_DEV:i,MODE:t}=m;return t==="production"?a:i},x=nt;var ot=async a=>{let i=x();await fetch(i,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)})},D=ot;var S=class{constructor({app:i,player:t,menu:n}){this.app=i,this.player=t,this.menu=n,this.hudContainer=new PIXI.Container,this.deathSound=PIXI.sound.Sound.from("sound/death.mp3"),this.dead=!1;let s={fill:16777215};this.textPoints=new PIXI.Text(`Pontos: ${this.player.points}`,s),this.textPoints.position.set(0,0),this.textLifes=new PIXI.Text(`Vidas: ${this.player.lifes}`,s),this.textLifes.position.set(0,30),this.textLifes=new PIXI.Text("Pausado",s),this.textLifes.position.set(0,30);let r=i.screen.width/2,h=i.screen.height/6;this.instructionsText=new PIXI.Text("Segure Mouse1 ou espaço para atirar. Use WASD para se mover",s),this.instructionsText.position.set(r,10),this.instructionsText.anchor.set(.5),this.app.setTimeout(()=>{this.instructionsText.visible=!1},10),this.textEnd=new PIXI.Text("Game Over",s),this.textEnd.visible=!1,this.textEnd.position.set(r,h),this.textEnd.anchor.set(.5),this.textPaused=new PIXI.Text("Pausado",s),this.textPaused.position.set(r,h),this.textPaused.anchor.set(.5),this.textPaused.visible=!1,this.hudContainer.addChild(this.instructionsText),this.hudContainer.addChild(this.textPaused),this.hudContainer.addChild(this.textPoints),this.hudContainer.addChild(this.textLifes),this.hudContainer.addChild(this.textEnd),this.app.stage.addChild(this.hudContainer)}set showPaused(i){this.textPaused.visible=i}endgameCheck(i){this.player.lifes<1?(this.textEnd.visible=!0,this.dead||(this.dead=!0,this.deathSound.play(),this.backButton(i),this.app.stop(),D({name:this.player.username,points:this.player.points}))):this.dead=!1}backButton(i){let t=this.app.screen.width/2,n=this.app.screen.height,s=new PIXI.Sprite(PIXI.Texture.WHITE);s.tint=16777215,s.anchor.set(.5),s.position.set(t,n-100),s.width=160,s.height=40,s.interactive=!0,s.cursor="pointer",s.on("click",()=>{i(),this.app.stage.removeChildren(),this.app.start(),new w({app:this.app})});let r=new PIXI.Text("Voltar",{fill:0,fontSize:30});r.position.set(t,n-100),r.anchor.set(.5),this.hudContainer.addChild(s),this.hudContainer.addChild(r)}update(i){this.textPoints.text=`Pontos: ${this.player.points}`,this.textLifes.text=`Vidas: ${this.player.lifes}`,this.endgameCheck(i)}},V=S;var X=class{constructor({app:i,username:t}){this.app=i;let n=!1,s=!1,r=!1,h={},e={x:0,y:0},o=new j({app:i,mousePosition:e,username:t,keys:h}),p=new O({app:i,player:o}),d=new V({app:i,player:o}),c=new z({app:i,hud:d}),l=()=>{o.shooting.interval.clear(),i.stage.removeChild(o.playerContainer),i.stage.removeChild(o.shooting.shootingContainer),i.stage.removeChild(c.buffContainer),i.stage.removeChild(p.spawnerContainer)};this.ticker=i.ticker.add(()=>{d.update(l),o.update(h),c.update(o),p.update(o),p.spawns.forEach(u=>{u.update(o,p)}),o.shooting.update(r,p,o)}),i.renderer.view.onmousemove=function(u){o.setMousePosition(u.clientX,u.clientY)},window.addEventListener("pointerdown",()=>{r=!0}),window.addEventListener("pointerup",()=>{r=!1}),window.addEventListener("keydown",u=>{h[u.key]=!0}),window.addEventListener("keyup",u=>{h[u.key]=!1}),window.addEventListener("keydown",u=>{if(!!["Escape","m"].includes(u.key))switch(u.key){case"Escape":d.showPaused=!n,o.shooting.update(),i.render(),n?i.start():i.stop(),n=!n;break;case"m":PIXI.sound.volumeAll=s?1:0,s=!s;break;default:break}})}},R=X;var M=class{constructor({app:i,menu:t}){this.app=i,this.menu=t,this.scoreContainer=new PIXI.Container,this.backButton(),this.app.stage.addChild(this.scoreContainer),this.showScore().then(()=>{this.app.stage.addChild(this.scoreContainer)})}backButton(){let i=this.app.screen.width/2,t=this.app.screen.height,n=new PIXI.Sprite(PIXI.Texture.WHITE);n.tint=16777215,n.anchor.set(.5),n.position.set(i,t-100),n.width=160,n.height=40,n.interactive=!0,n.cursor="pointer",n.on("click",()=>{document.body.removeChild(document.getElementById("scoreboard")),this.app.stage.removeChild(this.scoreContainer),this.menu.show()});let s=new PIXI.Text("Voltar",{fill:0,fontSize:30});s.position.set(i,t-100),s.anchor.set(.5),this.scoreContainer.addChild(n),this.scoreContainer.addChild(s)}drawLoading(){let i=document.createElement("h1");return i.innerText="Carregando ScoreBoard....",i.style.color="white",i.style.position="absolute",i.style.top="5%",i.style.left="40%",i.style.transform="translate(-50%, -50%)",i}async getScore(){let i=this.drawLoading();document.body.appendChild(i);let t=x(),s=await(await fetch(t)).json();return document.body.removeChild(i),s}drawTable(){let i=document.createElement("table");return i.id="scoreboard",i.style.fontSize="30px",i.style.position="absolute",i.style.top="0",i.style.left="320px",i.style.width="640px",i.style.backgroundColor="white",i}drawTableHead(){let i=document.createElement("tr"),t=document.createElement("th"),n=document.createElement("th"),s=document.createElement("th");return t.innerText="Rank",n.innerText="Nome",s.innerText="Pontos",i.appendChild(t),i.appendChild(n),i.appendChild(s),i}drawTableLine(i,t,n){let s=document.createElement("tr"),r=document.createElement("td"),h=document.createElement("td"),e=document.createElement("td");return r.style.textAlign="center",r.innerText=i,h.style.textAlign="center",h.innerText=t,e.style.textAlign="center",e.innerText=n,s.appendChild(r),s.appendChild(h),s.appendChild(e),s}async showScore(){let i=await this.getScore(),t=this.drawTable();t.appendChild(this.drawTableHead()),i.map(({name:n,points:s},r)=>{t.appendChild(this.drawTableLine(r+1,n,s))}),document.body.appendChild(t)}},W=M;var k=class{constructor({app:i}){this.x=i.screen.width/2,this.y=i.screen.height/6,this.app=i,this.menuContainer=new PIXI.Container,this.username=localStorage.getItem("username"),this.drawNameInput(),this.drawWelcomeText(),this.drawMenuOptions(),this.app.stage.addChild(this.menuContainer)}drawNameInput(){let i=new PIXI.TextInput({input:{fontSize:"25pt",padding:"14px",width:"200px",color:"#000000"},box:{default:{fill:15264243,rounded:16,stroke:{color:13356768,width:4}}}});this.username&&(i.text=this.username,i.disabled=!0),i.placeholder="Nome",i.x=this.x-115,i.y=this.y+50,i.on("input",t=>{this.username=t,localStorage.setItem("username",t),t?(this.menuContainer.children[2].tint=16777215,this.menuContainer.children[3].style.fill=0):(this.menuContainer.children[2].tint=13421772,this.menuContainer.children[3].style.fill=6710886)}),this.menuContainer.addChild(i),i.focus()}drawWelcomeText(){this.welcomeText=new PIXI.Text("Bem Vindo",{fill:16777215,fontSize:50}),this.welcomeText.position.set(this.x,this.y),this.welcomeText.anchor.set(.5),this.menuContainer.addChild(this.welcomeText)}drawMenuButton(i,t,n,s,r,h,e=16777215,o=0){let p=new PIXI.Sprite(PIXI.Texture.WHITE);p.tint=e,p.anchor.set(.5),p.interactive=!0,p.cursor="pointer",p.position.set(t,n),p.width=s,p.height=r,p.on("click",h);let d=new PIXI.Text(i,{fill:o,fontSize:50});d.position.set(t,n),d.anchor.set(.5),this.menuContainer.addChild(p),this.menuContainer.addChild(d)}drawMenuOptions(){this.drawMenuButton("Jogar",this.x,this.y+200,150,60,()=>{!this.username||this.play()},this.username?void 0:13421772,this.username?void 0:6710886),this.drawMenuButton("Score",this.x,this.y+300,160,60,()=>this.showScore()),this.drawMenuButton("Controles",this.x,this.y+400,220,60,()=>this.showControls())}hide(){this.app.stage.removeChild(this.menuContainer)}show(){this.app.stage.addChild(this.menuContainer)}play(){this.hide(),new R({app:this.app,username:this.username})}showControls(){this.hide(),new A({app:this.app,menu:this})}showScore(){this.hide(),new W({app:this.app,menu:this})}},w=k;function H(a){function i(n,s){var r=0,h=function(c){r+=c;var l=r/(60*a.ticker.speed);l>s&&e(!0)},e=function(c){a.ticker.remove(h),c&&n()},o=function(){e(!1)},p=function(){e(!0)};return a.ticker.add(h),{clear:o,finish:p}}function t(n){n.clear()}a.setTimeout=i,a.clearTimeout=t}function q(a){function i(n,s){let r=!1,h=0;var e=function(l){h+=l;var u=(h/(60*a.ticker.speed)).toFixed(2);u*100%(s*100)==0&&o(!0)},o=function(l){r?a.ticker.remove(e):l&&n()},p=function(){o(!1),r=!0},d=function(){o(!0)};return a.ticker.add(e),{clear:p,finish:d}}function t(n){n.clear()}a.setInterval=i,a.clearInterval=t}var rt=document.getElementById("mycanvas"),E=new PIXI.Application({view:rt,width:1280,height:720});H(E);q(E);new w({app:E});
//# sourceMappingURL=index.js.map
